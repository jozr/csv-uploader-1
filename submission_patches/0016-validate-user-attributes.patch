From 16e65471014677332e899449f37eb8af1fecbf73 Mon Sep 17 00:00:00 2001
From: jozwright <jozwright@gmail.com>
Date: Tue, 2 Dec 2014 23:00:50 -0800
Subject: [PATCH 16/23] validate user attributes

---
 lib/user.rb       | 6 ++++++
 spec/main_spec.rb | 5 +++++
 2 files changed, 11 insertions(+)
 create mode 100644 lib/user.rb

diff --git a/lib/user.rb b/lib/user.rb
new file mode 100644
index 0000000..c77aec0
--- /dev/null
+++ b/lib/user.rb
@@ -0,0 +1,6 @@
+require 'sinatra/activerecord'
+
+class User < ActiveRecord::Base
+  validates :email, :presence => true, format: { with: /\A[\w+\-.]+@[a-z\d\-]+(\.[a-z]+)*\.[a-z]+\z/i, on: :create }
+  validates :password, :presence => true
+end
\ No newline at end of file
diff --git a/spec/main_spec.rb b/spec/main_spec.rb
index ba43e1c..4434419 100644
--- a/spec/main_spec.rb
+++ b/spec/main_spec.rb
@@ -20,4 +20,9 @@ describe Detail do
   	expect(Detail.latest_upload_revenue).to eql 200.0
   	@test.delete
   end
+end
+
+describe User do
+  it { should validate_presence_of :email }
+  it { should validate_presence_of :password }
 end
\ No newline at end of file
-- 
1.8.4

